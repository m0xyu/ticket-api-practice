name: 予約管理
description: ''
endpoints:
  -
    custom: []
    httpMethods:
      - POST
    uri: 'api/v1/events/{eventId}/reserve-pending'
    metadata:
      custom: []
      groupName: 予約管理
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        仮予約
        * 座席を確保し、仮予約状態（PENDING）を作成します。
        成功すると `201 Created` が返されます。
        * <aside class="notice">
        <strong>冪等性キーについて</strong><br>
        このエンドポイントは <code>Idempotency-Key</code> ヘッダーに対応しています。<br>
        ネットワークエラー時の二重予約を防ぐため、UUIDなどの一意なキーをヘッダーに含めることを推奨します。
        </aside>
        * @param int $eventId
      description: ''
      authenticated: true
      deprecated: false
    headers:
      Cookie: '{YOUR_AUTH_KEY}'
      Idempotency-Key: 123e4567-e89b-12d3-a456-426614174000
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      eventId:
        custom: []
        name: eventId
        description: 予約するイベントのID
        required: true
        example: 123
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
    cleanUrlParameters:
      eventId: 123
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 201
        content: '{"message":"\u4eee\u4e88\u7d04\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f","reservation_id":123,"expires_at":"2025-12-29T10:00:00.000000Z"}'
        headers: []
        description: 成功時
      -
        custom: []
        status: 409
        content: '{"message":"\u3059\u3067\u306b\u4e88\u7d04\u6e08\u307f\u3067\u3059","error_code":"already_confirmed"}'
        headers: []
        description: すでに予約済み
      -
        custom: []
        status: 409
        content: '{"message":"\u6e80\u5e2d\u3067\u3059","error_code":"seats_full"}'
        headers: []
        description: 満席です
    responseFields: []
    auth:
      - headers
      - Cookie
      - 6g43cv8PD1aE5beadkZfhV6
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: 'api/v1/reservations/{reservationId}/confirm'
    metadata:
      custom: []
      groupName: 予約管理
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: |-
        予約確定
        * 仮予約（PENDING）を確定（CONFIRMED）に変更します。
        決済完了後に呼び出してください。
        * <aside class="notice">
        <strong>冪等性キー（必須）</strong><br>
        決済確定処理の二重実行を防ぐため、このエンドポイントでは <code>Idempotency-Key</code> が必須です。<br>
        </aside>
        * @param int $reservationId
      description: ''
      authenticated: true
      deprecated: false
    headers:
      Cookie: '{YOUR_AUTH_KEY}'
      Idempotency-Key: 123e4567-e89b-12d3-a456-426614174000
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      reservationId:
        custom: []
        name: reservationId
        description: 仮予約中の予約のID
        required: true
        example: 123
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
    cleanUrlParameters:
      reservationId: 123
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: '{"message":"\u4e88\u7d04\u304c\u78ba\u5b9a\u3057\u307e\u3057\u305f","reservation_id":123}'
        headers: []
        description: 成功時
      -
        custom: []
        status: 400
        content: '{"message":"\u6709\u52b9\u671f\u9650\u5207\u308c\u3067\u3059\u3002\u518d\u5ea6\u4e88\u7d04\u3057\u3066\u304f\u3060\u3055\u3044\u3002","error_code":"expired_or_canceled"}'
        headers: []
        description: 仮予約の有効期限切れ
      -
        custom: []
        status: 403
        content: '{"message":"\u3053\u306e\u4e88\u7d04\u3092\u78ba\u5b9a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093","error_code":"unauthorized"}'
        headers: []
        description: 権限エラー
    responseFields: []
    auth:
      - headers
      - Cookie
      - 6g43cv8PD1aE5beadkZfhV6
    controller: null
    method: null
    route: null
  -
    custom: []
    httpMethods:
      - POST
    uri: 'api/v1/reservations/{reservationId}/cancel'
    metadata:
      custom: []
      groupName: 予約管理
      groupDescription: ''
      subgroup: ''
      subgroupDescription: ''
      title: 予約キャンセルエンドポイント
      description: ''
      authenticated: true
      deprecated: false
    headers:
      Cookie: '{YOUR_AUTH_KEY}'
      Content-Type: application/json
      Accept: application/json
    urlParameters:
      reservationId:
        custom: []
        name: reservationId
        description: キャンセルする予約のID
        required: true
        example: 123
        type: integer
        enumValues: []
        exampleWasSpecified: false
        nullable: false
        deprecated: false
    cleanUrlParameters:
      reservationId: 123
    queryParameters: []
    cleanQueryParameters: []
    bodyParameters: []
    cleanBodyParameters: []
    fileParameters: []
    responses:
      -
        custom: []
        status: 200
        content: '{"id":123,"status":"canceled","canceled_at":"2025-12-29T10:00:00.000000Z"}'
        headers: []
        description: 成功時
      -
        custom: []
        status: 400
        content: '{"message":"\u30a4\u30d9\u30f3\u30c8\u958b\u59cb\u5f8c\u306e\u305f\u3081\u30ad\u30e3\u30f3\u30bb\u30eb\u3067\u304d\u307e\u305b\u3093","error_code":"cancellation_not_allowed"}'
        headers: []
        description: イベント開始後
      -
        custom: []
        status: 403
        content: '{"message":"\u3053\u306e\u4e88\u7d04\u3092\u78ba\u5b9a\u3059\u308b\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093","error_code":"unauthorized"}'
        headers: []
        description: 権限エラー
    responseFields: []
    auth:
      - headers
      - Cookie
      - 6g43cv8PD1aE5beadkZfhV6
    controller: null
    method: null
    route: null
